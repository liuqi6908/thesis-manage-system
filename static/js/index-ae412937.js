import{r as v,a as C,o as T,q as B,D as S,d as N,c as Y,w as j,b as c,e as U,f as $,g as a,i,u as e,j as k,_ as A}from"./index-6808ba74.js";import{m as V}from"./message-27522a78.js";import{a as F,D as H}from"./download-b5dd3e73.js";import{P as I}from"./index-eb0c4c8c.js";import{u as L}from"./hooks-62a2627c.js";import{R as q}from"./refresh-74425c09.js";import"./epTheme-ce7d143e.js";function E(){const h=v(),n=v(!0),d=C({text:"正在加载第1页...",viewBox:"-10, -10, 50, 50",spinner:`
        <path class="path" d="
          M 30 15
          L 28 17
          M 25.61 25.61
          A 15 15, 0, 0, 1, 15 30
          A 15 15, 0, 1, 1, 27.99 7.5
          L 15 15
        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
      `}),p=C({total:0,pageSize:10,currentPage:1,background:!0}),_=[{type:"selection",width:50,align:"left",hide:({checkList:t})=>!t.includes("勾选列")},{label:"序号",type:"index",width:70,hide:({checkList:t})=>!t.includes("序号列")},{label:"课题名称",prop:"title",minWidth:200},{label:"姓名",prop:"username",minWidth:100},{label:"学号",prop:"userNo",minWidth:100},{label:"性别",prop:"gender",minWidth:70},{label:"学院",prop:"college",minWidth:150},{label:"专业",prop:"major",minWidth:150},{label:"班级",prop:"class",minWidth:100},{label:"评分",prop:"score",minWidth:90},{label:"创建时间",minWidth:160,prop:"createTime",formatter:({createTime:t})=>B(t).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:100,slot:"operation"}];function m(t){t.url?window.open(t.url):V("下载失败，暂无文件",{type:"error",grouping:!0})}function s(){d.text="正在加载...",n.value=!0,S(500).then(()=>{n.value=!1})}function b(t){d.text=`正在加载第${t}页...`,n.value=!0,S(500).then(()=>{n.value=!1})}function f(){n.value=!0,F().then(t=>{t.success?(h.value=t.data,p.total=t.data.length):V(t.message,{type:"error"})}).finally(()=>{setTimeout(()=>{n.value=!1},500)})}return T(()=>{f()}),{loading:n,loadingConfig:d,columns:_,dataList:h,pagination:p,onSearch:f,handleDownload:m,handleSizeChange:s,handleCurrentChange:b}}const O={class:"main"},G=N({name:"Reviewed"}),J=N({...G,setup(h){const n=v(),{loading:d,loadingConfig:p,columns:_,dataList:m,pagination:s,onSearch:b,handleDownload:f,handleSizeChange:t,handleCurrentChange:R}=E(),r=C({title:"",username:"",userNo:""}),P=l=>{l&&l.resetFields()},x=Y(()=>m.value?m.value.filter(l=>l.title?l.title.toString().toLowerCase().includes(r.title):!1).filter(l=>l.username?l.username.toString().toLowerCase().includes(r.username):!1).filter(l=>l.userNo?l.userNo.toString().toLowerCase().includes(r.userNo):!1):[]);return j(()=>{s.total=x.value.length}),(l,u)=>{const w=c("el-input"),g=c("el-form-item"),y=c("el-button"),W=c("el-form"),D=c("pure-table");return U(),$("div",O,[a(W,{ref_key:"formRef",ref:n,inline:!0,model:r,class:"bg-bg_color w-[99/100] pl-8 pt-4"},{default:i(()=>[a(g,{label:"课题名称：",prop:"title"},{default:i(()=>[a(w,{modelValue:r.title,"onUpdate:modelValue":u[0]||(u[0]=o=>r.title=o),placeholder:"请输入课题名称",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),a(g,{label:"学生姓名：",prop:"username"},{default:i(()=>[a(w,{modelValue:r.username,"onUpdate:modelValue":u[1]||(u[1]=o=>r.username=o),placeholder:"请输入学生姓名",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),a(g,{label:"学号：",prop:"userNo"},{default:i(()=>[a(w,{modelValue:r.userNo,"onUpdate:modelValue":u[2]||(u[2]=o=>r.userNo=o),placeholder:"请输入学号",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),a(g,null,{default:i(()=>[a(y,{icon:e(L)(e(q)),onClick:u[3]||(u[3]=o=>P(n.value))},{default:i(()=>[k(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),a(e(I),{title:"已评审列表",onRefresh:e(b),class:"overflow-hidden"},{default:i(({size:o,checkList:z})=>[a(D,{border:"","align-whole":"center",showOverflowTooltip:"",loading:e(d),"loading-config":e(p),size:o,height:o==="small"?360:500,data:e(x).slice((e(s).currentPage-1)*e(s).pageSize,e(s).currentPage*e(s).pageSize),columns:e(_),checkList:z,pagination:e(s),paginationSmall:o==="small","header-cell-style":{background:"var(--el-table-row-hover-bg-color)",color:"var(--el-text-color-primary)"},onPageSizeChange:e(t),onPageCurrentChange:e(R)},{operation:i(({row:M})=>[a(y,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(L)(e(H)),onClick:K=>e(f)(M)},{default:i(()=>[k(" 下载 ")]),_:2},1032,["size","icon","onClick"])]),_:2},1032,["loading","loading-config","size","height","data","columns","checkList","pagination","paginationSmall","header-cell-style","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["onRefresh"])])}}});const oe=A(J,[["__scopeId","data-v-ea7f1fc9"]]);export{oe as default};
