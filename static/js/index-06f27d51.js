import{d as C,r as f,ae as E,N as $,aJ as k,b as r,s as F,v as P,e as t,f as m,g as v,i as a,n,u as c,j as U,F as N,l as I,x as d,ac as j,ap as z,z as J,p as L,m as M,t as w,_ as R}from"./index-6808ba74.js";import{m as T}from"./message-27522a78.js";import{u as q}from"./hooks-62a2627c.js";import{E as A}from"./edit-pen-af58ba35.js";const B=i=>(L("data-v-eace8e06"),i=i(),M(),i),G={class:"card-header"},H=B(()=>n("span",{class:"font-medium"},"用户信息",-1)),K={style:{color:"var(--el-color-primary)"}},O=B(()=>n("div",{class:"card-header"},[n("span",{class:"font-medium"},"指导教师")],-1)),Q={style:{color:"var(--el-color-primary)"}},W=C({name:"User"}),X=C({...W,setup(i){const h=f(!0),{userNo:S,roles:u}=E(),g=f([]),_=f(null);return $(()=>{k({userNo:S,role:u[0]}).then(e=>{e.success&&e.data&&e.data.length>0?(g.value=e.data,u[0]==="student"&&e.data.some(l=>{if(l.teacherNo)return k({userNo:l.teacherNo,role:u[0]}).then(s=>{s.success&&s.data&&s.data.length>0&&(_.value=s.data)}),!0})):e.message&&T(e.message,{grouping:!0,type:"error"})}).finally(()=>{h.value=!1})}),(e,l)=>{const s=r("el-button"),y=r("el-descriptions-item"),b=r("el-descriptions"),x=r("el-card"),D=r("el-empty"),V=F("loading");return P((t(),m("div",null,[v(x,{class:"box-card m-4",shadow:"never"},{header:a(()=>[n("div",G,[H,v(s,{type:"primary",class:"float-right",onClick:l[0]||(l[0]=o=>e.$router.push({name:"ChangePassword"})),icon:c(q)(c(A))},{default:a(()=>[U("修改密码")]),_:1},8,["icon"])])]),default:a(()=>[v(b,{border:""},{default:a(()=>[(t(!0),m(N,null,I(g.value,(o,p)=>(t(),d(y,{label:o.label,"label-align":"left",align:"left",key:p},{default:a(()=>[n("span",K,w(o.field),1)]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),c(u)[0]==="student"?(t(),d(x,{key:0,class:"box-card m-4",shadow:"never"},{header:a(()=>[O]),default:a(()=>[_.value&&_.value.length>0?(t(),d(b,{key:0,border:""},{default:a(()=>[(t(!0),m(N,null,I(_.value,(o,p)=>(t(),d(y,{label:o.label,"label-align":"left",align:"left",key:p},{default:a(()=>[n("span",Q,w(o.field),1)]),_:2},1032,["label"]))),128))]),_:1})):(t(),d(D,{key:1,description:c(j)(c(z)("status.noData"))},null,8,["description"]))]),_:1})):J("",!0)])),[[V,h.value]])}}});const te=R(X,[["__scopeId","data-v-eace8e06"]]);export{te as default};
