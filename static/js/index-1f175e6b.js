import{r as L,a as _,o as N,g as n,b as u,q as j,D as P,d as B,c as A,w as H,e as h,f as C,i as s,F as R,l as T,u as t,j as I,x as z,_ as $}from"./index-6808ba74.js";import{m as q}from"./message-27522a78.js";import{a as E}from"./thesis-d36a44e4.js";import{P as O}from"./index-eb0c4c8c.js";import{u as G}from"./hooks-62a2627c.js";import{R as J}from"./refresh-74425c09.js";import"./epTheme-ce7d143e.js";function K(){const y=L(),p=_(["结合生产实际或经济建设","结合科研","结合实验室建设","教师自拟"]),b=_(["待审核","通过","驳回"]),i=L(!0),m=_({text:"正在加载第1页...",viewBox:"-10, -10, 50, 50",spinner:`
        <path class="path" d="
          M 30 15
          L 28 17
          M 25.61 25.61
          A 15 15, 0, 0, 1, 15 30
          A 15 15, 0, 1, 1, 27.99 7.5
          L 15 15
        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
      `}),f=_({total:0,pageSize:10,currentPage:1,background:!0}),w=[{type:"selection",width:50,align:"left",hide:({checkList:e})=>!e.includes("勾选列")},{label:"序号",type:"index",width:70,hide:({checkList:e})=>!e.includes("序号列")},{label:"课题名称",prop:"title",minWidth:300},{label:"课题类型",minWidth:150,cellRenderer:e=>n(u("el-text"),null,{default:()=>[p[e.row.type]]})},{label:"课题简介",prop:"introduce",minWidth:400},{label:"指导教师",prop:"teacher",minWidth:100},{label:"可接收总人数",prop:"total",minWidth:120},{label:"已选人数",prop:"selected",minWidth:100},{label:"选题学生",prop:"student",minWidth:100},{label:"学号",prop:"studentNo",minWidth:100},{label:"课题状态",minWidth:100,cellRenderer:e=>n(u("el-tag"),{key:e.row.id,type:["warning","primary","danger"][e.row.status],class:"mx-1",effect:"light"},{default:()=>[b[e.row.status]]})},{label:"创建时间",minWidth:160,prop:"createTime",formatter:({createTime:e})=>j(e).format("YYYY-MM-DD HH:mm:ss")}];function x(){m.text="正在加载...",i.value=!0,P(500).then(()=>{i.value=!1})}function d(e){m.text=`正在加载第${e}页...`,i.value=!0,P(500).then(()=>{i.value=!1})}function v(){i.value=!0,E().then(e=>{e.success?(y.value=e.data,f.total=e.data.length):q(e.message,{type:"error"})}).finally(()=>{setTimeout(()=>{i.value=!1},500)})}return N(()=>{v()}),{loading:i,loadingConfig:m,columns:w,dataList:y,typeList:p,statusList:b,pagination:f,onSearch:v,handleSizeChange:x,handleCurrentChange:d}}const Q={class:"main"},X=B({name:"TopicList"}),Z=B({...X,setup(y){const p=L(),{loading:b,loadingConfig:i,columns:m,dataList:f,typeList:w,statusList:x,pagination:d,onSearch:v,handleSizeChange:e,handleCurrentChange:M}=K(),a=_({title:"",type:null,teacher:"",status:null}),F=o=>{o&&o.resetFields()},V=A(()=>f.value?f.value.filter(o=>o.title?o.title.toString().toLowerCase().includes(a.title):!1).filter(o=>o.teacher?o.teacher.toString().toLowerCase().includes(a.teacher):!1).filter(o=>[0,1,2,3].includes(a.type)?o.type===a.type:!0).filter(o=>[0,1,2].includes(a.status)?o.status===a.status:!0):[]);return H(()=>{d.total=V.value.length}),(o,r)=>{const S=u("el-input"),g=u("el-form-item"),k=u("el-option"),W=u("el-select"),U=u("el-button"),Y=u("el-form"),D=u("pure-table");return h(),C("div",Q,[n(Y,{ref_key:"formRef",ref:p,inline:!0,model:a,class:"bg-bg_color w-[99/100] pl-8 pt-4"},{default:s(()=>[n(g,{label:"课题名称：",prop:"title"},{default:s(()=>[n(S,{modelValue:a.title,"onUpdate:modelValue":r[0]||(r[0]=l=>a.title=l),placeholder:"请输入课题名称",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),n(g,{label:"课题类型：",prop:"type"},{default:s(()=>[n(W,{modelValue:a.type,"onUpdate:modelValue":r[1]||(r[1]=l=>a.type=l),placeholder:"请选择课题类型",clearable:"",class:"!w-[180px]"},{default:s(()=>[(h(!0),C(R,null,T(t(w),(l,c)=>(h(),z(k,{key:c,label:l,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(g,{label:"指导教师：",prop:"teacher"},{default:s(()=>[n(S,{modelValue:a.teacher,"onUpdate:modelValue":r[2]||(r[2]=l=>a.teacher=l),placeholder:"请输入指导教师",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),n(g,{label:"课题状态：",prop:"status"},{default:s(()=>[n(W,{modelValue:a.status,"onUpdate:modelValue":r[3]||(r[3]=l=>a.status=l),placeholder:"请选择课题状态",clearable:"",class:"!w-[180px]"},{default:s(()=>[(h(!0),C(R,null,T(t(x),(l,c)=>(h(),z(k,{key:c,label:l,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(g,null,{default:s(()=>[n(U,{icon:t(G)(t(J)),onClick:r[4]||(r[4]=l=>F(p.value))},{default:s(()=>[I(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),n(t(O),{title:"课题列表",onRefresh:t(v),class:"overflow-hidden"},{default:s(({size:l,checkList:c})=>[n(D,{border:"","align-whole":"center",showOverflowTooltip:"",loading:t(b),"loading-config":t(i),size:l,height:l==="small"?360:500,data:t(V).slice((t(d).currentPage-1)*t(d).pageSize,t(d).currentPage*t(d).pageSize),columns:t(m),checkList:c,pagination:t(d),paginationSmall:l==="small","header-cell-style":{background:"var(--el-table-row-hover-bg-color)",color:"var(--el-text-color-primary)"},onPageSizeChange:t(e),onPageCurrentChange:t(M)},null,8,["loading","loading-config","size","height","data","columns","checkList","pagination","paginationSmall","header-cell-style","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["onRefresh"])])}}});const se=$(Z,[["__scopeId","data-v-65b19752"]]);export{se as default};
