import{r as S,a as L,o as E,q as A,E as H,D as N,d as R,c as Y,w as $,b as p,e as j,f as I,g as l,i,u as e,j as y,_ as U}from"./index-6808ba74.js";import{m as z}from"./message-27522a78.js";import{g as F,D as q}from"./download-b5dd3e73.js";import{P as O}from"./index-eb0c4c8c.js";import{u as k}from"./hooks-62a2627c.js";import{R as G}from"./refresh-74425c09.js";import"./epTheme-ce7d143e.js";function J(){const d=S(),a=S(!0),c=L({text:"正在加载第1页...",viewBox:"-10, -10, 50, 50",spinner:`
        <path class="path" d="
          M 30 15
          L 28 17
          M 25.61 25.61
          A 15 15, 0, 0, 1, 15 30
          A 15 15, 0, 1, 1, 27.99 7.5
          L 15 15
        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
      `}),m=L({total:0,pageSize:10,currentPage:1,background:!0}),v=[{type:"selection",width:50,align:"left",hide:({checkList:t})=>!t.includes("勾选列")},{label:"序号",type:"index",width:70,hide:({checkList:t})=>!t.includes("序号列")},{label:"课题名称",prop:"title",minWidth:150},{label:"姓名",prop:"username",minWidth:100},{label:"学号",prop:"userNo",minWidth:100},{label:"性别",prop:"gender",minWidth:70},{label:"学院",prop:"college",minWidth:150},{label:"专业",prop:"major",minWidth:150},{label:"班级",prop:"class",minWidth:100},{label:"创建时间",minWidth:160,prop:"createTime",formatter:({createTime:t})=>A(t).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:150,slot:"operation"}];function f(t){t.url?window.open(t.url):z("下载失败，暂无文件",{type:"error",grouping:!0})}function s(t){H.prompt("请输入该课题的评审评分：","评审提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputErrorMessage:"请输入正确格式"}).then(()=>{a.value=!0,setTimeout(()=>{const h=d.value.findIndex(n=>n.id===t.id);h>-1&&d.value.splice(h,1),a.value=!1},1e3)}).catch(()=>{})}function b(){c.text="正在加载...",a.value=!0,N(500).then(()=>{a.value=!1})}function w(t){c.text=`正在加载第${t}页...`,a.value=!0,N(500).then(()=>{a.value=!1})}function g(){a.value=!0,F().then(t=>{t.success?(d.value=t.data,m.total=t.data.length):z(t.message,{type:"error"})}).finally(()=>{setTimeout(()=>{a.value=!1},500)})}return E(()=>{g()}),{loading:a,loadingConfig:c,columns:v,dataList:d,pagination:m,onSearch:g,handleDownload:f,handleAudit:s,handleSizeChange:b,handleCurrentChange:w}}const K={width:1024,height:1024,body:'<path fill="currentColor" d="M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"/><path fill="currentColor" d="m469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"/>'},Q=K,X={class:"main"},Z=R({name:"PendingReview"}),ee=R({...Z,setup(d){const a=S(),{loading:c,loadingConfig:m,columns:v,dataList:f,pagination:s,onSearch:b,handleDownload:w,handleAudit:g,handleSizeChange:t,handleCurrentChange:h}=J(),n=L({title:"",username:"",userNo:""}),T=o=>{o&&o.resetFields()},V=Y(()=>f.value?f.value.filter(o=>o.title?o.title.toString().toLowerCase().includes(n.title):!1).filter(o=>o.username?o.username.toString().toLowerCase().includes(n.username):!1).filter(o=>o.userNo?o.userNo.toString().toLowerCase().includes(n.userNo):!1):[]);return $(()=>{s.total=V.value.length}),(o,u)=>{const C=p("el-input"),_=p("el-form-item"),x=p("el-button"),M=p("el-form"),W=p("pure-table");return j(),I("div",X,[l(M,{ref_key:"formRef",ref:a,inline:!0,model:n,class:"bg-bg_color w-[99/100] pl-8 pt-4"},{default:i(()=>[l(_,{label:"课题名称：",prop:"title"},{default:i(()=>[l(C,{modelValue:n.title,"onUpdate:modelValue":u[0]||(u[0]=r=>n.title=r),placeholder:"请输入课题名称",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),l(_,{label:"学生姓名：",prop:"username"},{default:i(()=>[l(C,{modelValue:n.username,"onUpdate:modelValue":u[1]||(u[1]=r=>n.username=r),placeholder:"请输入学生姓名",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),l(_,{label:"学号：",prop:"userNo"},{default:i(()=>[l(C,{modelValue:n.userNo,"onUpdate:modelValue":u[2]||(u[2]=r=>n.userNo=r),placeholder:"请输入学号",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),l(_,null,{default:i(()=>[l(x,{icon:e(k)(e(G)),onClick:u[3]||(u[3]=r=>T(a.value))},{default:i(()=>[y(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),l(e(O),{title:"待评审列表",onRefresh:e(b),class:"overflow-hidden"},{default:i(({size:r,checkList:B})=>[l(W,{border:"","align-whole":"center",showOverflowTooltip:"",loading:e(c),"loading-config":e(m),size:r,height:r==="small"?360:500,data:e(V).slice((e(s).currentPage-1)*e(s).pageSize,e(s).currentPage*e(s).pageSize),columns:e(v),checkList:B,pagination:e(s),paginationSmall:r==="small","header-cell-style":{background:"var(--el-table-row-hover-bg-color)",color:"var(--el-text-color-primary)"},onPageSizeChange:e(t),onPageCurrentChange:e(h)},{operation:i(({row:P})=>[l(x,{class:"reset-margin",link:"",type:"primary",size:r,icon:e(k)(e(q)),onClick:D=>e(w)(P)},{default:i(()=>[y(" 下载 ")]),_:2},1032,["size","icon","onClick"]),l(x,{class:"reset-margin",link:"",type:"primary",size:r,icon:e(k)(e(Q)),onClick:D=>e(g)(P)},{default:i(()=>[y(" 评审 ")]),_:2},1032,["size","icon","onClick"])]),_:2},1032,["loading","loading-config","size","height","data","columns","checkList","pagination","paginationSmall","header-cell-style","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["onRefresh"])])}}});const se=U(ee,[["__scopeId","data-v-4a247988"]]);export{se as default};
