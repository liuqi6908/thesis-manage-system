import{r as k,a as v,o as D,g as l,b as u,q as H,E as A,D as P,d as M,c as I,w as q,e as V,f as T,i as r,F as O,l as G,u as t,j as W,x as J,_ as K}from"./index-6808ba74.js";import{m as B}from"./message-27522a78.js";import{g as Q}from"./student-acb41f04.js";import{P as X}from"./index-eb0c4c8c.js";import{u as R}from"./hooks-62a2627c.js";import{E as Z}from"./edit-pen-af58ba35.js";import{R as ee}from"./refresh-74425c09.js";import"./epTheme-ce7d143e.js";function te(){const x=k(),c=v(["待审核","接收","驳回"]),s=k(!0),p=v({text:"正在加载第1页...",viewBox:"-10, -10, 50, 50",spinner:`
        <path class="path" d="
          M 30 15
          L 28 17
          M 25.61 25.61
          A 15 15, 0, 0, 1, 15 30
          A 15 15, 0, 1, 1, 27.99 7.5
          L 15 15
        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
      `}),_=v({total:0,pageSize:10,currentPage:1,background:!0}),h=[{type:"selection",width:50,align:"left",hide:({checkList:e})=>!e.includes("勾选列")},{label:"序号",type:"index",width:70,hide:({checkList:e})=>!e.includes("序号列")},{label:"姓名",prop:"username",minWidth:100},{label:"学号",prop:"userNo",minWidth:100},{label:"性别",prop:"gender",minWidth:70},{label:"学院",prop:"college",minWidth:150},{label:"专业",prop:"major",minWidth:150},{label:"班级",prop:"class",minWidth:100},{label:"课题名称",prop:"title",minWidth:150},{label:"选题状态",minWidth:100,cellRenderer:e=>l(u("el-tag"),{key:e.row.id,type:["warning","primary","danger"][e.row.status],class:"mx-1",effect:"light"},{default:()=>[c[e.row.status]]})},{label:"创建时间",minWidth:160,prop:"createTime",formatter:({createTime:e})=>H(e).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:100,slot:"operation"}];function y(e,f){A.confirm(`确认要 <strong>${f===1?"接收":"驳回"}</strong> <strong style='color:var(--el-color-primary)'>
      ${e.username}</strong> 的选题申请吗?`,"审核提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{s.value=!0,setTimeout(()=>{e.status=f,B(`${f===1?"接收":"驳回"}成功`,{type:"success"}),s.value=!1},500)}).catch(()=>{})}function d(){p.text="正在加载...",s.value=!0,P(500).then(()=>{s.value=!1})}function C(e){p.text=`正在加载第${e}页...`,s.value=!0,P(500).then(()=>{s.value=!1})}function m(){s.value=!0,Q().then(e=>{e.success?(x.value=e.data,_.total=e.data.length):B(e.message,{type:"error"})}).finally(()=>{setTimeout(()=>{s.value=!1},500)})}return D(()=>{m()}),{loading:s,loadingConfig:p,columns:h,dataList:x,statusList:c,pagination:_,onSearch:m,handleUpdate:y,handleSizeChange:d,handleCurrentChange:C}}const le={class:"main"},ae=M({name:"SupervisedStudents"}),ne=M({...ae,setup(x){const c=k(),{loading:s,loadingConfig:p,columns:_,dataList:h,statusList:y,pagination:d,onSearch:C,handleUpdate:m,handleSizeChange:e,handleCurrentChange:f}=te(),n=v({username:"",userNo:"",title:"",status:null}),U=o=>{o&&o.resetFields()},L=I(()=>h.value?h.value.filter(o=>o.username?o.username.toString().includes(n.username):!1).filter(o=>o.userNo?o.userNo.toString().includes(n.userNo):!1).filter(o=>o.title?o.title.toString().includes(n.title):!1).filter(o=>[0,1,2].includes(n.status)?o.status===n.status:!0):[]);return q(()=>{d.total=L.value.length}),(o,i)=>{const w=u("el-input"),g=u("el-form-item"),$=u("el-option"),z=u("el-select"),N=u("el-button"),E=u("el-form"),F=u("el-popconfirm"),Y=u("pure-table");return V(),T("div",le,[l(E,{ref_key:"formRef",ref:c,inline:!0,model:n,class:"bg-bg_color w-[99/100] pl-8 pt-4"},{default:r(()=>[l(g,{label:"学生姓名：",prop:"username"},{default:r(()=>[l(w,{modelValue:n.username,"onUpdate:modelValue":i[0]||(i[0]=a=>n.username=a),placeholder:"请输入学生姓名",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),l(g,{label:"学号：",prop:"userNo"},{default:r(()=>[l(w,{modelValue:n.userNo,"onUpdate:modelValue":i[1]||(i[1]=a=>n.userNo=a),placeholder:"请输入学号",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),l(g,{label:"论文题目：",prop:"title"},{default:r(()=>[l(w,{modelValue:n.title,"onUpdate:modelValue":i[2]||(i[2]=a=>n.title=a),placeholder:"请输入论文题目",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),l(g,{label:"选题状态：",prop:"status"},{default:r(()=>[l(z,{modelValue:n.status,"onUpdate:modelValue":i[3]||(i[3]=a=>n.status=a),placeholder:"请选择选题状态",clearable:"",class:"!w-[180px]"},{default:r(()=>[(V(!0),T(O,null,G(t(y),(a,b)=>(V(),J($,{key:b,label:a,value:b},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(g,null,{default:r(()=>[l(N,{icon:t(R)(t(ee)),onClick:i[4]||(i[4]=a=>U(c.value))},{default:r(()=>[W(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),l(t(X),{title:"学生列表",onRefresh:t(C),class:"overflow-hidden"},{default:r(({size:a,checkList:b})=>[l(Y,{border:"","align-whole":"center",showOverflowTooltip:"",loading:t(s),"loading-config":t(p),size:a,height:a==="small"?360:500,data:t(L).slice((t(d).currentPage-1)*t(d).pageSize,t(d).currentPage*t(d).pageSize),columns:t(_),checkList:b,pagination:t(d),paginationSmall:a==="small","header-cell-style":{background:"var(--el-table-row-hover-bg-color)",color:"var(--el-text-color-primary)"},onPageSizeChange:t(e),onPageCurrentChange:t(f)},{operation:r(({row:S})=>[l(F,{title:"审核提示!","confirm-button-text":"接收","cancel-button-text":"驳回","cancel-button-type":"danger",onConfirm:j=>t(m)(S,1),onCancel:j=>t(m)(S,2)},{reference:r(()=>[l(N,{class:"reset-margin",link:"",type:"primary",size:a,disabled:S.status!==0,icon:t(R)(t(Z))},{default:r(()=>[W(" 审核 ")]),_:2},1032,["size","disabled","icon"])]),_:2},1032,["onConfirm","onCancel"])]),_:2},1032,["loading","loading-config","size","height","data","columns","checkList","pagination","paginationSmall","header-cell-style","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["onRefresh"])])}}});const me=K(ne,[["__scopeId","data-v-240f9eac"]]);export{me as default};
